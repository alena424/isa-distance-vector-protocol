RIP protocol

General
- network collection of Autonomous sytems, each AS its own routing technology
- IGP(INTERNAL GATEWAY PROTOCOL): used within an AS
- EGP(EXTERNAL gateway protocol): used among AS
- RIPng works as IGP in modern size AS

1 - request    A request for the responding system to send all or
                  part of its routing table.

2 - response   A message containing all or part of the sender's
                  routing table.  This message may be sent in response
                  to a request, or it may be an unsolicited routing
                  update generated by the sender.
IPV4


IPV6
- algoritms: distance Vector algorithm (sometimes called Ford-Fulkerson algorithm cause of earliest desription or Bellman-Ford cause of Bellmans equation)

Limitations:
1. maximum of 15 hops
2. counting to infinity to resolve certain unusual situations 2.2. (loop -> require either much time or bandwidth)
3. uses fixed metrics (no real time factors as delay, reliability, load)

- each router that implemets RIPng is assumed to have a routing table

Entry:
1. metric - cost of getting a datagram from the router to that destination
2. next hop - ipv6 address of next router along the path to the destionation 
3. route change flag - flag to indicate if the route changed recently
4. timers sec. 2.3.

destination prefix - 128bits -> 16bytes
route tag - differs extarnal ripng routes and internal ex. number of Autonomous Systems from which the routes were learned
prefix length - contains a value between 0 and 128 inclusive
			- 0 mans default route, prefix should be 0:0:0:0:0:0:0:0
next hop	- is identifiedf if metric equals 0xFF that route tag anf prefix legth must be zero
			- purpose: elimintae packets being routed through extra hops in the systems, if not link lokal shoud be treated as 0:0:0:0:0:0:0:0:0:0 (8x)

timers
- every 30 secons updates are triggered
- the 30 second timer is offset by a small random time +/- 0 to 15 seconds
- timout - after timeout, the route is no longer valid, remains in routing table for a short time so the neighbors can be notified that the routers has been dropped
-> upon expiration of the garbage-collector timer, the route is finaly removed from the routing table  

timeout inicialized
1. when route is established
2. any time an update message is received for the route
! of 180 secons elapse from the last time the timeout was inicialized -> the route is considered as expired -> starts deletion process

Deletions
2 reasons: the timeout expires, metric is set to 16 because of an update received from the currect router

1. garbage-collector timer is set to 120 seconds
2. metric for the route is 16 infinity
3. the flag is set that this entry has been changed
4. the output porcess is signalled to trigger a response

until the garbase collectorexpires, the route is included in all updates sent BY this router. When expires -> the route is deleted from the routing table

Request message
- ask for response containg all or part of a routers routing table.
- normaly send as multicast BUT can be a situation that we need to send to just one response to just one router -> packet is sent direcly to the router from a UDP port other that the IPng port
- if the re no entries no response is given
--> one special case: one entry in the request, destation prefix is zero, a prefix length is zero, metric of infinity 16, then this is request to snd ENTIRE routing table

Response
3 reasons
- response to a quiery
- regular update
- triggered update caused by a route change

controls
response must be ignored if:
- ip address is not from rigth UDP port
- ip source is from a valid neighbor
- the source of datagram must be from link local address

If the metric is greater than 16, ignore the entry but log the event

Test validations:
- is the destination prefix valid, a link local address should never be in an RTE
- is the prefix length valid 0 - 128
- is the metric valid 1-16


metric = MIN (metric + cost, infinity)

Process of setting a route to routing table
- set destination prefix and length in RTE (routing table entry)
- set metric to the nexly calculated metric
- set the next hop address to be the address from whicg the datagram came or is specified by a next hop in RTE
- inicialized the timeout
- set the route change flag
- signal the outpur process to trigger an update

if there is an existing router -> compare next hop -> if next hop is from the same router as the existing router -> update timer
if metric is lower -> put the next metric in, adjust hp address, set the route change flag, if infinity start the deletion process

response message is multicast group FF02::9

poison reverse - loop, we poinson omne router e.g. set metric to infinity


